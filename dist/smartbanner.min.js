/*!
 * smartbanner.js v1.27.0 <https://github.com/ain/smartbanner.js#readme>
 * Copyright Â© 2026 Ain Tohvri, contributors. Licensed under GPL-3.0.
 */
(()=>{function f(i){return i.indexOf("smartbanner:")!==-1&&i.split(":")[1].length>0}function m(i){let t=i.split("-");return t.map(function(e,n){n>0&&(t[n]=e.charAt(0).toUpperCase()+e.substring(1))}),t.join("")}var p=class{parse(){let t=document.getElementsByTagName("meta"),e={};return Array.apply(null,t).forEach(function(n){let o=null,a=n.getAttribute("name"),d=n.getAttribute("content");a&&d&&f(a)&&d.length>0&&(o=a.split(":")[1],o.indexOf("-")!==-1&&(o=m(o)),e[o]=d)}),e}};var r=class i{static platform(){let t=window.navigator.maxTouchPoints,e=window.navigator.userAgent;if(/Android/i.test(e))return"android";if(!window.MSStream&&!/X11|Linux|Windows/i.test(e)&&t&&t>0||/iPhone|iPad|iPod/i.test(e))return"ios"}static userAgentMatchesRegex(t){return new RegExp(t).test(window.navigator.userAgent)}static jQueryMobilePage(){return typeof window.$!="undefined"&&typeof window.$.mobile!="undefined"&&document.querySelector(".ui-page")!==null}static wrapperElement(){let t=i.jQueryMobilePage()?".ui-page":"html";return document.querySelectorAll(t)}};var l=class i{static getCookieExpiresString(t){let e=new Date;return`expires=${new Date(e.getTime()+t).toGMTString()};`}static bake(t,e){document.cookie=`smartbanner_exited=1; ${t?i.getCookieExpiresString(t):""} path=${e}`}static unbake(){document.cookie="smartbanner_exited=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}static get baked(){return document.cookie.replace(/(?:(?:^|.*;\s*)smartbanner_exited\s*=\s*([^;]*).*$)|^.*$/,"$1")==="1"}};var b="android,ios",x="Close",_="View",s={originalTop:"data-smartbanner-original-top",originalMarginTop:"data-smartbanner-original-margin-top"};function w(i,t){t.exit(),i.preventDefault()}function v(i,t){t.clickout()}function g(i){this.positioningDisabled||h(i.data.height)}function A(i){document.querySelector(".js_smartbanner__exit").addEventListener("click",n=>w(n,i)),document.querySelector(".js_smartbanner__button").addEventListener("click",n=>v(n,i)),r.jQueryMobilePage()&&$(document).on("pagebeforeshow",i,g)}function E(){r.jQueryMobilePage()&&$(document).off("pagebeforeshow",g)}function h(i){let t=r.wrapperElement();for(let e=0,n=t.length,o;e<n;e++)if(o=t[e],r.jQueryMobilePage()){if(o.getAttribute(s.originalTop))continue;let a=parseFloat(getComputedStyle(o).top);o.setAttribute(s.originalTop,isNaN(a)?0:a),o.style.top=i+"px"}else{if(o.getAttribute(s.originalMarginTop))continue;let a=parseFloat(getComputedStyle(o).marginTop);o.setAttribute(s.originalMarginTop,isNaN(a)?0:a),o.style.marginTop=i+"px"}}function T(){let i=r.wrapperElement();for(let t=0,e=i.length,n;t<e;t++)n=i[t],r.jQueryMobilePage()&&n.getAttribute(s.originalTop)?n.style.top=n.getAttribute(s.originalTop)+"px":n.getAttribute(s.originalMarginTop)&&(n.style.marginTop=n.getAttribute(s.originalMarginTop)+"px")}var u=class{constructor(){let t=new p;this.options=t.parse(),this.platform=r.platform();let e=new Event("smartbanner.init");document.dispatchEvent(e)}get originalTop(){let t=r.wrapperElement()[0];return parseFloat(t.getAttribute(s.originalTop))}get originalTopMargin(){let t=r.wrapperElement()[0];return parseFloat(t.getAttribute(s.originalMarginTop))}get priceSuffix(){return this.platform==="ios"&&this.options.priceSuffixApple?this.options.priceSuffixApple:this.platform==="android"&&this.options.priceSuffixGoogle?this.options.priceSuffixGoogle:""}get price(){return this.options.price&&this.options.price!==""?this.options.price:""}get icon(){return this.platform==="android"?this.options.iconGoogle:this.options.iconApple}get buttonUrl(){return this.platform==="android"?this.options.buttonUrlGoogle:this.platform==="ios"?this.options.buttonUrlApple:"#"}get closeLabel(){return this.options.closeLabel!==void 0?this.options.closeLabel:x}get buttonLabel(){let t=this.options.button;return this.platform==="android"&&this.options.buttonGoogle?t=this.options.buttonGoogle:this.platform==="ios"&&this.options.buttonApple&&(t=this.options.buttonApple),t||_}get html(){return`<div class="smartbanner smartbanner--${this.options.customDesignModifier?this.options.customDesignModifier:this.platform} js_smartbanner">
      <a href="#" class="smartbanner__exit js_smartbanner__exit" title="${this.closeLabel}" rel="nofollow"></a>
      <div class="smartbanner__icon" style="background-image: url(${this.icon});"></div>
      <div class="smartbanner__info">
        <div>
          <div class="smartbanner__info__title">${this.options.title}</div>
          <div class="smartbanner__info__author">${this.options.author}</div>
          <div class="smartbanner__info__price">${this.price}${this.priceSuffix}</div>
        </div>
      </div>
      <a href="${this.buttonUrl}" target="_blank" class="smartbanner__button js_smartbanner__button" rel="noopener" aria-label="${this.buttonLabel}"><span class="smartbanner__button__label">${this.buttonLabel}</span></a>
    </div>`}get height(){try{return document.querySelector(".js_smartbanner").offsetHeight}catch(t){return 0}}get platformEnabled(){let t=this.options.enabledPlatforms||b;return t&&t.replace(/\s+/g,"").split(",").indexOf(this.platform)!==-1}get positioningDisabled(){return this.options.disablePositioning==="true"}get apiEnabled(){return this.options.api==="true"||this.options.api==="yes"}get userAgentExcluded(){return this.options.excludeUserAgentRegex?r.userAgentMatchesRegex(this.options.excludeUserAgentRegex):!1}get userAgentIncluded(){return this.options.includeUserAgentRegex?r.userAgentMatchesRegex(this.options.includeUserAgentRegex):!1}get hideTtl(){return this.options.hideTtl?parseInt(this.options.hideTtl):!1}get hidePath(){return this.options.hidePath?this.options.hidePath:"/"}publish(){if(Object.keys(this.options).length===0)throw new Error("No options detected. Please consult documentation.");if(l.baked||this.userAgentExcluded||!(this.platformEnabled||this.userAgentIncluded))return!1;let t=document.createElement("div");document.querySelector("body").prepend(t),t.outerHTML=this.html;let e=new Event("smartbanner.view");document.dispatchEvent(e),this.positioningDisabled||h(this.height),A(this)}exit(){E(),this.positioningDisabled||T();let t=document.querySelector(".js_smartbanner");document.querySelector("body").removeChild(t);let e=new Event("smartbanner.exit");document.dispatchEvent(e),l.bake(this.hideTtl,this.hidePath)}clickout(){let t=new Event("smartbanner.clickout");document.dispatchEvent(t)}};var c;window.addEventListener("load",function(){c=new u,c.apiEnabled?window.smartbanner=c:c.publish()});})();
